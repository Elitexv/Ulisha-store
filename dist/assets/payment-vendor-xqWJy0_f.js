import"./react-vendor-BtACSmdg.js";var h=function(){return h=Object.assign||function(l){for(var n,i=1,a=arguments.length;i<a;i++){n=arguments[i];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(l[t]=n[t])}return l},h.apply(this,arguments)};function y(r,l,n,i){function a(t){return t instanceof n?t:new n(function(c){c(t)})}return new(n||(n=Promise))(function(t,c){function u(o){try{e(i.next(o))}catch(d){c(d)}}function s(o){try{e(i.throw(o))}catch(d){c(d)}}function e(o){o.done?t(o.value):a(o.value).then(u,s)}e((i=i.apply(r,[])).next())})}function f(r,l){var n={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},i,a,t,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(e){return function(o){return s([e,o])}}function s(e){if(i)throw new TypeError("Generator is already executing.");for(;c&&(c=0,e[0]&&(n=0)),n;)try{if(i=1,a&&(t=e[0]&2?a.return:e[0]?a.throw||((t=a.return)&&t.call(a),0):a.next)&&!(t=t.call(a,e[1])).done)return t;switch(a=0,t&&(e=[e[0]&2,t.value]),e[0]){case 0:case 1:t=e;break;case 4:return n.label++,{value:e[1],done:!1};case 5:n.label++,a=e[1],e=[0];continue;case 7:e=n.ops.pop(),n.trys.pop();continue;default:if(t=n.trys,!(t=t.length>0&&t[t.length-1])&&(e[0]===6||e[0]===2)){n=0;continue}if(e[0]===3&&(!t||e[1]>t[0]&&e[1]<t[3])){n.label=e[1];break}if(e[0]===6&&n.label<t[1]){n.label=t[1],t=e;break}if(t&&n.label<t[2]){n.label=t[2],n.ops.push(e);break}t[2]&&n.ops.pop(),n.trys.pop();continue}e=l.call(r,n)}catch(o){e=[6,o],a=0}finally{i=t=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}var g="https://checkout.flutterwave.com/v3.js",b=3,w=1,p=1;function _(r){return typeof r=="number"}function k(r){var l=r.maxAttempt,n=l===void 0?b:l,i=r.interval,a=i===void 0?w:i;return y(this,void 0,void 0,function(){return f(this,function(t){return n=_(n)?Math.max(1,n):b,a=_(a)?Math.max(1,a):w,[2,new Promise(function(c,u){var s=document.createElement("script");s.src=g,s.async=!0;var e=function(){s.removeEventListener("load",e),s.removeEventListener("error",o),c()},o=function(){document.body.removeChild(s),console.log("Flutterwave script download failed. Attempt: "+p),p<n?(++p,setTimeout(function(){return k({maxAttempt:n,interval:a}).then(c).catch(u)},a*1e3)):u(new Error("Failed to load payment modal. Check your internet connection and retry later."))};s.addEventListener("load",e),s.addEventListener("error",o),document.body.appendChild(s)})]})})}var v=!1;function x(r){return function(n){var i,a,t=n.callback,c=n.onClose;return y(this,void 0,void 0,function(){var u,s=this;return f(this,function(e){switch(e.label){case 0:return v?[2]:window.FlutterwaveCheckout?[3,2]:(v=!0,[4,k(h({},r.retry))]);case 1:e.sent(),v=!1,e.label=2;case 2:return u=h(h({},r),{amount:(i=r.amount)!==null&&i!==void 0?i:0,callback:function(o){return y(s,void 0,void 0,function(){var d;return f(this,function(m){switch(m.label){case 0:return o.status!=="successful"?[3,2]:(t(o),[4,fetch("https://cors-anywhere.herokuapp.com/https://kgelfdz7mf.execute-api.us-east-1.amazonaws.com/staging/sendevent",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({publicKey:r.public_key,language:"Flutterwave-React-v3",version:"1.0.7",title:(r==null?void 0:r.payment_options.split(",").length)>1?"Initiate-Charge-Multiple":"Initiate-Charge-"+(r==null?void 0:r.payment_options),message:"15s"})})]);case 1:return m.sent(),[3,4];case 2:return t(o),[4,fetch("https://cors-anywhere.herokuapp.com/https://kgelfdz7mf.execute-api.us-east-1.amazonaws.com/staging/sendevent",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({publicKey:(d=r.public_key)!==null&&d!==void 0?d:"",language:"Flutterwave-React-v3",version:"1.0.7",title:(r==null?void 0:r.payment_options.split(",").length)>1?"Initiate-Charge-Multiple-error":"Initiate-Charge-"+(r==null?void 0:r.payment_options)+"-error",message:"15s"})})];case 3:m.sent(),m.label=4;case 4:return[2]}})})},onclose:c,payment_options:(a=r==null?void 0:r.payment_options)!==null&&a!==void 0?a:"card, ussd, mobilemoney"}),window.FlutterwaveCheckout(u),[2]}})})}}function A(){document.getElementsByName("checkout").forEach(function(r){r.setAttribute("style","position:fixed;top:0;left:0;z-index:-1;border:none;opacity:0;pointer-events:none;width:100%;height:100%;"),r.setAttribute("id","flwpugpaidid"),r.setAttribute("src","https://checkout.flutterwave.com/?"),document.body.style.overflow=""})}export{A as c,x as u};
//# sourceMappingURL=payment-vendor-xqWJy0_f.js.map
